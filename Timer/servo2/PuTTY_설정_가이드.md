# PuTTY 설정 및 문제 해결 가이드

## PuTTY 설정 방법

### 1. 기본 연결 설정
1. **PuTTY 실행**
2. **Connection Type**: Serial 선택
3. **Serial Line**: COM 포트 번호 입력 (예: COM3, COM4 등)
4. **Speed**: 115200 입력
5. **Data bits**: 8
6. **Stop bits**: 1
7. **Parity**: None
8. **Flow control**: None

### 2. 터미널 설정
1. **Terminal** 탭 클릭
2. **Local echo**: Force on 선택
3. **Local line editing**: Force on 선택
4. **Implicit CR in every LF**: 체크
5. **Implicit LF in every CR**: 체크

### 3. 키보드 설정
1. **Terminal** 탭에서 **Keyboard** 섹션
2. **Backspace key**: Control-H 선택
3. **Function keys and keypad**: Linux 선택

## 문제 해결

### 문제 1: 입력이 전혀 안 되는 경우

#### 확인사항:
1. **COM 포트 확인**
   - Windows 장치 관리자에서 올바른 COM 포트 번호 확인
   - STM32 보드가 연결된 포트 사용

2. **보드레이트 확인**
   - 정확히 115200으로 설정
   - 다른 값으로 설정하면 통신 불가

3. **케이블 연결 확인**
   - TX(PA2) ↔ RX 연결
   - RX(PA3) ↔ TX 연결
   - GND 연결

#### 해결방법:
```bash
# Windows에서 COM 포트 확인
# 장치 관리자 → 포트(COM & LPT) 확인
```

### 문제 2: 입력은 되지만 반응이 없는 경우

#### 확인사항:
1. **UART 인터럽트 활성화 확인**
2. **코드 컴파일 및 플래시 확인**
3. **디버그 메시지 확인**

#### 해결방법:
- 코드를 다시 컴파일하고 플래시
- 디버그 메시지가 출력되는지 확인
- `[DEBUG] 수신된 문자:` 메시지 확인

### 문제 3: 일부 문자만 인식되는 경우

#### 확인사항:
1. **터미널 설정 확인**
2. **문자 인코딩 확인**
3. **줄바꿈 설정 확인**

#### 해결방법:
- PuTTY에서 **Terminal** → **Implicit CR in every LF** 체크
- **Local echo** 활성화

### 문제 4: 메뉴가 표시되지 않는 경우

#### 확인사항:
1. **UART 초기화 확인**
2. **printf 함수 동작 확인**
3. **시리얼 모니터 설정 확인**

#### 해결방법:
- 코드에서 `[INFO] UART 초기화 완료` 메시지 확인
- 메뉴가 표시되는지 확인

## 테스트 방법

### 1. 기본 연결 테스트
```
=== STM32 모터 제어 시스템 ===

=== 메뉴 선택 ===
1. 서보모터 회전
2. 스텝모터 회전
선택하세요 (1 또는 2):
```

### 2. 입력 테스트
- '1' 입력 → 서보모터 메뉴로 이동
- '2' 입력 → 스테퍼 모터 메뉴로 이동
- 'm' 입력 → 메인 메뉴로 돌아가기

### 3. 디버그 메시지 확인
정상 작동 시 다음과 같은 메시지가 표시됩니다:
```
[INFO] UART 초기화 완료
[INFO] UART 인터럽트 수신 시작
[DEBUG] 수신된 문자: 0x31 ('1')
[DEBUG] 메뉴 입력 처리: '1' (0x31)
서보모터 메뉴 선택됨
```

## 대안 방법

### 1. 다른 터미널 프로그램 사용
- **Tera Term**
- **Arduino IDE 시리얼 모니터**
- **VS Code Serial Monitor**

### 2. 하드웨어 확인
- STM32 보드 전원 확인
- UART 핀 연결 확인
- 점퍼 와이어 상태 확인

### 3. 코드 수정
문제가 지속되면 코드에서 폴링 방식으로 변경:
```c
// 인터럽트 대신 폴링 방식 사용
char ch;
if (HAL_UART_Receive(&huart2, (uint8_t*)&ch, 1, 100) == HAL_OK)
{
    process_uart_input(ch);
}
```

## 주의사항
- PuTTY 연결 후 STM32 보드를 리셋해야 메뉴가 표시될 수 있습니다
- 입력 시 엔터키를 누르지 말고 바로 문자를 입력하세요
- 대소문자를 구분하므로 정확한 문자를 입력하세요
